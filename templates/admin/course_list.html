{% extends "layout.html" %}

{% block title %}Administrar cursos - EDUNET{% endblock title %}

{% block content %}
{% include "navbar.html" %}

<div class="container mt-5 pt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3"><i class="bi bi-book-fill me-2"></i>Lista de Cursos</h1>
    <a href="{{ url_for('admin.create_course') }}" class="btn btn-success shadow-sm">
      <i class="bi bi-plus-circle me-1"></i> Crear Curso
    </a>
  </div>

  {% if error %}
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    {{ error }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
  </div>
  {% endif %}

  <div class="table-responsive shadow-sm rounded border">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre del Curso</th>
          <th scope="col">Profesor</th>
          <th scope="col">Anuncios</th>
          <th scope="col">Notas</th>
        </tr>
      </thead>
      <tbody>
        {% for course in courses %}
        <tr>
          <td>{{ course.course_id }}</td>
          <td>{{ course.name }}</td>
          <td>
            {% if course.professor %}
              <span data-bs-toggle="tooltip" title="ID: {{ course.professor.professor_id }}">
                {{ course.professor.name }}
              </span>
            {% else %}
              <span class="text-muted fst-italic">Sin asignar</span>
            {% endif %}
          </td>
          <td>
            <span class="badge bg-info">{{ course.announcements|length }}</span>
          </td>
          <td>
            <span class="badge bg-secondary">{{ course.grades|length }}</span>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
  // Inicializar tooltips
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
  tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl)
  })
</script>

{% endblock content %}
